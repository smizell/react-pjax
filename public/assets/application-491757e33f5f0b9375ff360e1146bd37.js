!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var a,n=t(document);t.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var a=t('meta[name="csrf-token"]').attr("content");a&&e.setRequestHeader("X-CSRF-Token",a)},fire:function(e,a,n){var r=t.Event(a);return e.trigger(r,n),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var r,i,o,l,s,u,c,d;if(a.fire(n,"ajax:before")){if(l=n.data("cross-domain"),s=l===e?null:l,u=n.data("with-credentials")||null,c=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){r=n.attr("method"),i=n.attr("action"),o=n.serializeArray();var p=n.data("ujs:submit-button");p&&(o.push(p),n.data("ujs:submit-button",null))}else n.is(a.inputChangeSelector)?(r=n.data("method"),i=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):n.is(a.buttonClickSelector)?(r=n.data("method")||"get",i=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(r=n.data("method"),i=a.href(n),o=n.data("params")||null);d={type:r||"GET",data:o,dataType:c,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),a.fire(n,"ajax:beforeSend",[t,r])},success:function(t,e,a){n.trigger("ajax:success",[t,e,a])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,a){n.trigger("ajax:error",[t,e,a])},crossDomain:s},u&&(d.xhrFields={withCredentials:u}),i&&(d.url=i);var f=a.ajax(d);return n.trigger("ajax:send",f),f}return!1},handleMethod:function(n){var r=a.href(n),i=n.data("method"),o=n.attr("target"),l=t("meta[name=csrf-token]").attr("content"),s=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+i+'" type="hidden" />';s!==e&&l!==e&&(c+='<input name="'+s+'" value="'+l+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(c).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(a.disableSelector).each(function(){var e=t(this),a=e.is("button")?"html":"val";e.data("ujs:enable-with",e[a]()),e[a](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(a.enableSelector).each(function(){var e=t(this),a=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[a](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),r=!1;return n?(a.fire(t,"confirm")&&(r=a.confirm(n),e=a.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,a,n){var r,i,o=t(),l=a||"input,textarea",s=e.find(l);return s.each(function(){if(r=t(this),i=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!i==!n){if(r.is("input[type=radio]")&&s.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(t,e){return a.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return a.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},a.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||a.CSRFProtection(n)}),n.delegate(a.linkDisableSelector,"ajax:complete",function(){a.enableElement(t(this))}),n.delegate(a.linkClickSelector,"click.rails",function(n){var r=t(this),i=r.data("method"),o=r.data("params");if(!a.allowAction(r))return a.stopEverything(n);if(r.is(a.linkDisableSelector)&&a.disableElement(r),r.data("remote")!==e){if(!(!n.metaKey&&!n.ctrlKey||i&&"GET"!==i||o))return!0;var l=a.handleRemote(r);return l===!1?a.enableElement(r):l.error(function(){a.enableElement(r)}),!1}return r.data("method")?(a.handleMethod(r),!1):void 0}),n.delegate(a.buttonClickSelector,"click.rails",function(e){var n=t(this);return a.allowAction(n)?(a.handleRemote(n),!1):a.stopEverything(e)}),n.delegate(a.inputChangeSelector,"change.rails",function(e){var n=t(this);return a.allowAction(n)?(a.handleRemote(n),!1):a.stopEverything(e)}),n.delegate(a.formSubmitSelector,"submit.rails",function(n){var r=t(this),i=r.data("remote")!==e,o=a.blankInputs(r,a.requiredInputSelector),l=a.nonBlankInputs(r,a.fileInputSelector);if(!a.allowAction(r))return a.stopEverything(n);if(o&&r.attr("novalidate")==e&&a.fire(r,"ajax:aborted:required",[o]))return a.stopEverything(n);if(i){if(l){setTimeout(function(){a.disableFormElements(r)},13);var s=a.fire(r,"ajax:aborted:file",[l]);return s||setTimeout(function(){a.enableFormElements(r)},13),s}return a.handleRemote(r),!1}setTimeout(function(){a.disableFormElements(r)},13)}),n.delegate(a.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!a.allowAction(n))return a.stopEverything(e);var r=n.attr("name"),i=r?{name:r,value:n.val()}:null;n.closest("form").data("ujs:submit-button",i)}),n.delegate(a.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&a.disableFormElements(t(this))}),n.delegate(a.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&a.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),a=t("meta[name=csrf-param]").attr("content");t('form input[name="'+a+'"]').val(e)}))}(jQuery),function(t){function e(e,n,r){var i=this;return this.on("click.pjax",e,function(e){var o=t.extend({},p(n,r));o.container||(o.container=t(this).attr("data-pjax")||i),a(e,o)})}function a(e,a,n){n=p(a,n);var i=e.currentTarget;if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==i.protocol||location.hostname!==i.hostname||i.hash&&i.href.replace(i.hash,"")===location.href.replace(location.hash,"")||i.href===location.href+"#")){var o={url:i.href,container:t(i).attr("data-pjax"),target:i},l=t.extend({},o,n),s=t.Event("pjax:click");t(i).trigger(s,[l]),s.isDefaultPrevented()||(r(l),e.preventDefault())}}function n(e,a,n){n=p(a,n);var i=e.currentTarget;if("FORM"!==i.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var o={type:i.method.toUpperCase(),url:i.action,data:t(i).serializeArray(),container:t(i).attr("data-pjax"),target:i};r(t.extend({},o,n)),e.preventDefault()}function r(e){function a(e,a){var r=t.Event(e,{relatedTarget:n});return l.trigger(r,a),!r.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,r.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,i=d(e.url).hash,l=e.context=f(e.container);e.data||(e.data={}),e.data._pjax=l.selector;var s;e.beforeSend=function(t,n){return"GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",l.selector),a("pjax:beforeSend",[t,n])?(n.timeout>0&&(s=setTimeout(function(){a("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),e.requestUrl=d(n.url).href,void 0):!1},e.complete=function(t,n){s&&clearTimeout(s),a("pjax:complete",[t,n,e]),a("pjax:end",[t,e])},e.error=function(t,n,r){var i=g("",t,e),l=a("pjax:error",[t,n,r,e]);"GET"==e.type&&"abort"!==n&&l&&o(i.url)},e.success=function(n,s,c){var p="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,f=c.getResponseHeader("X-PJAX-Version"),h=g(n,c,e);if(p&&f&&p!==f)return o(h.url),void 0;if(!h.contents)return o(h.url),void 0;r.state={id:e.id||u(),url:h.url,title:h.title,container:l.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(r.state,h.title,h.url),document.activeElement.blur(),h.title&&(document.title=h.title),l.html(h.contents);var m=l.find("input[autofocus], textarea[autofocus]").last()[0];if(m&&document.activeElement!==m&&m.focus(),v(h.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==i){var b=d(h.url);b.hash=i,r.state.url=b.href,window.history.replaceState(r.state,h.title,b.href);var y=t(b.hash);y.length&&t(window).scrollTop(y.offset().top)}a("pjax:success",[n,s,c,e])},r.state||(r.state={id:u(),url:window.location.href,title:document.title,container:l.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(r.state,document.title));var p=r.xhr;p&&p.readyState<4&&(p.onreadystatechange=t.noop,p.abort()),r.options=e;var p=r.xhr=t.ajax(e);return p.readyState>0&&(e.push&&!e.replace&&(b(r.state.id,l.clone().contents()),window.history.pushState(null,"",c(e.requestUrl))),a("pjax:start",[p,e]),a("pjax:send",[p,e])),r.xhr}function i(e,a){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(t.extend(n,p(e,a)))}function o(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function l(e){var a=e.state;if(a&&a.container){if(w&&D==a.url)return;if(r.state.id===a.id)return;var n=t(a.container);if(n.length){var i,l=R[a.id];r.state&&(i=r.state.id<a.id?"forward":"back",y(i,r.state.id,n.clone().contents()));var s=t.Event("pjax:popstate",{state:a,direction:i});n.trigger(s);var u={id:a.id,url:a.url,container:n,push:!1,fragment:a.fragment,timeout:a.timeout,scrollTo:!1};l?(n.trigger("pjax:start",[null,u]),a.title&&(document.title=a.title),n.html(l),r.state=a,n.trigger("pjax:end",[null,u])):r(u),n[0].offsetHeight}else o(location.href)}w=!1}function s(e){var a=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",r=t("<form>",{method:"GET"===n?"GET":"POST",action:a,style:"display:none"});"GET"!==n&&"POST"!==n&&r.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var i=e.data;if("string"==typeof i)t.each(i.split("&"),function(e,a){var n=a.split("=");r.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof i)for(key in i)r.append(t("<input>",{type:"hidden",name:key,value:i[key]}));t(document.body).append(r),r.submit()}function u(){return(new Date).getTime()}function c(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function d(t){var e=document.createElement("a");return e.href=t,e}function p(e,a){return e&&a?a.container=e:a=t.isPlainObject(e)?e:{container:e},a.container&&(a.container=f(a.container)),a}function f(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function h(t,e){return t.filter(e).add(t.find(e))}function m(e){return t.parseHTML(e,document,!0)}function g(e,a,n){var r={};if(r.url=c(a.getResponseHeader("X-PJAX-URL")||n.requestUrl),/<html/i.test(e))var i=t(m(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),o=t(m(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var i=o=t(m(e));if(0===o.length)return r;if(r.title=h(i,"title").last().text(),n.fragment){if("body"===n.fragment)var l=o;else var l=h(o,n.fragment).first();l.length&&(r.contents=l.contents(),r.title||(r.title=l.attr("title")||l.data("title")))}else/<html/i.test(e)||(r.contents=o);return r.contents&&(r.contents=r.contents.not(function(){return t(this).is("title")}),r.contents.find("title").remove(),r.scripts=h(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=t.trim(r.title)),r}function v(e){if(e){var a=t("script[src]");e.each(function(){var e=this.src,n=a.filter(function(){return this.src===e});if(!n.length){var r=document.createElement("script");r.type=t(this).attr("type"),r.src=t(this).attr("src"),document.head.appendChild(r)}})}}function b(t,e){for(R[t]=e,T.push(t);k.length;)delete R[k.shift()];for(;T.length>r.defaults.maxCacheLength;)delete R[T.shift()]}function y(t,e,a){var n,r;R[e]=a,"forward"===t?(n=T,r=k):(n=k,r=T),n.push(e),(e=r.pop())&&delete R[e]}function x(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function S(){t.fn.pjax=e,t.pjax=r,t.pjax.enable=t.noop,t.pjax.disable=j,t.pjax.click=a,t.pjax.submit=n,t.pjax.reload=i,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:x},t(window).on("popstate.pjax",l)}function j(){t.fn.pjax=function(){return this},t.pjax=s,t.pjax.enable=S,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",l)}var w=!0,D=window.location.href,O=window.history.state;O&&O.container&&(r.state=O),"state"in window.history&&(w=!1);var R={},k=[],T=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),t.support.pjax?S():j()}(jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var a,n,r,i,o,l=gap,s=e[t];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(t)),"function"==typeof rep&&(s=rep.call(e,t,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,a=0;i>a;a+=1)o[a]=str(a,s)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+l+"]":"["+o.join(",")+"]",gap=l,r}if(rep&&"object"==typeof rep)for(i=rep.length,a=0;i>a;a+=1)"string"==typeof rep[a]&&(n=rep[a],r=str(n,s),r&&o.push(quote(n)+(gap?": ":":")+r));else for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r=str(n,s),r&&o.push(quote(n)+(gap?": ":":")+r));return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+l+"}":"{"+o.join(",")+"}",gap=l,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,a){var n;if(gap="",indent="","number"==typeof a)for(n=0;a>n;n+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var a,n,r=t[e];if(r&&"object"==typeof r)for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n=walk(r,a),void 0!==n?r[a]=n:delete r[a]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function t(t){var e=/^(\d\d):(\d\d)(:(\d\d)(\.\d+)?)?/.exec(t);return e&&e[1]<=23&&e[2]<=59&&(!e[4]||e[4]<=59)?e[0].length:0}function e(t,e){return 1==e||3==e||5==e||7==e||8==e||10==e||12==e?31:4==e||6==e||9==e||11==e?30:2==e&&(t%400==0||t%4==0&&t%100!=0)?29:28}function a(t){var a=/^(\d{4,})-(\d\d)-(\d\d)/.exec(t);return a&&a[1]>=1&&a[2]>=1&&a[2]<=12&&a[3]>=1&&a[3]<=e(a[1],a[2])?a[0].length:0}function n(t){return t&&a(t)==t.length}function r(e){var n=a(e);if(n&&"T"==e[n]&&(e=e.substr(n+1),n=t(e))){if(e=e.substr(n),"Z"==e)return!0;var r=/^[+-](\d\d):(\d\d)$/.exec(e);if(r&&r[1]<=23&&r[2]<=59)return!0}return!1}function i(t){return t&&/\S/.test(t)?t.replace(/^\s+|\s+$/g,"").split(/\s+/):[]}function o(t){var e=p.map(i(t),function(t){return'[itemtype~="'+t.replace(/"/g,'\\"')+'"]'}).join("")||"*";return p(e,this).filter(function(){return null!=this.getAttribute("itemscope")&&null==this.getAttribute("itemprop")})}function l(t){for(;t.parentNode;)t=t.parentNode;return t}function s(t,e){var a=t.getAttribute(e);return a?a:""}function u(t){return function(){var e=i(this.attr(t));return e.contains=function(t){return-1!=p.inArray(t,this)},e}}function c(){var t=this[0];if(null==t.getAttribute("itemprop"))return null;if(this.itemScope())return t;switch(t.tagName.toUpperCase()){case"META":return this.attr("content")||"";case"AUDIO":case"EMBED":case"IFRAME":case"IMG":case"SOURCE":case"TRACK":case"VIDEO":return s(t,"src");case"A":case"AREA":case"LINK":return s(t,"href");case"OBJECT":return s(t,"data");case"DATA":return this.attr("value")||"";case"TIME":var e=t.getAttribute("datetime");if(null!=e)return e;default:return this.text()}}function d(t){function e(e){function n(i){for(var o=0;o<r.length;o++)r[o]==i&&r.splice(o--,1);var l=p(i);if(i!=e){var s=l.itemProp();if(s.length&&(!t||s.contains(t))&&a.push(i),l.itemScope())return}l.children().each(function(){n(this)})}var r=[e],i=l(e);for(p.each(p(e).itemRef(),function(t,e){var a=p("#"+e,i);a.length&&r.push(a[0])}),p.unique(r);r.length;)n(r[0])}var a=[];return this.itemScope()&&e(this[0]),p(a)}var p=jQuery;p.microdata={},p.microdata.isValidGlobalDateAndTimeString=r,p.microdata.isValidDateString=n,p.fn.extend({items:o,itemScope:function(){return null!=this[0].getAttribute("itemscope")},itemType:u("itemtype"),itemId:function(){return s(this[0],"itemid")},itemProp:u("itemprop"),itemRef:u("itemref"),itemValue:c,properties:d})}(),jQuery.microdata.json=function(t,e){function a(t,e){var r=n(t),i={},o=r.itemType();return o.length&&(i.type=n(o).toArray()),r.itemId()&&(i.id=r.itemId()),i.properties={},r.properties().each(function(r,o){var l,s=n(o);s.itemScope()?-1!=n.inArray(o,e)?l="ERROR":(e.push(t),l=a(o,e),e.pop()):l=s.itemValue(),n.each(s.itemProp(),function(t,e){i.properties[e]||(i.properties[e]=[]),i.properties[e].push(l)})}),i}var n=jQuery,r={};r.items=[];var i=t?n(t):n(document).items();return i.each(function(t,e){var i=n(e);i.itemScope()&&r.items.push(a(e,[]))}),e?e(r):JSON.stringify(r)};var Utils={getData:function(t){return{url:window.location.pathname,data:JSON.parse($.microdata.json(t.items())),resourceName:$('meta[name="resource_name"]').attr("value")}}},App=React.createClass({displayName:"App",getInitialState:function(){return{data:Utils.getData(this.props.dataContainer)}},componentDidMount:function(){var t=this;$.pjax.defaults.scrollTo=!1,$(document).pjax('a[href!="#"]',t.props.dataContainer),$(document).on("submit","#data form",function(e){$.pjax.submit(e,t.props.dataContainer)}),$(document).on("pjax:complete",function(){t.setState({data:Utils.getData(t.props.dataContainer)}),console.log(t.state)}),window.addEventListener("popstate",function(){t.setState({data:Utils.getData(t.props.dataContainer)}),console.log(t.state)})},render:function(){switch(this.state.data.resourceName){case"Blog":return Blog({data:this.state.data.data});case"BlogPosting":return BlogPosting({data:this.state.data.data})}}}),Blog=React.createClass({displayName:"Blog",getInitialState:function(){return{editing:!1}},handleSubmit:function(t){var e=$("#data").find(".new_post");e.find("#post_title").val(this.refs.headline.getDOMNode().value),e.find("#post_body").val(this.refs.text.getDOMNode().value),e.submit(),t.preventDefault()},handleNewClick:function(t){this.setState({editing:!this.state.editing}),t.preventDefault()},render:function(){return blogNodes=this.props.data.items.map(function(t){var e={headline:t.properties.headline[0],url:t.properties.url[0]};return BlogHeadline({blogHeadline:e})}),React.DOM.div({className:React.addons.classSet({editing:this.state.editing})},React.DOM.div({className:"blog-postings"},React.DOM.p(null,React.DOM.a({href:"#",onClick:this.handleNewClick},"New Post")),blogNodes),React.DOM.div({className:"blog-posting-new"},React.DOM.form({onSubmit:this.handleSubmit},React.DOM.p(null,React.DOM.label(null,"Title"),React.DOM.br(null),React.DOM.input({type:"text",ref:"headline"})),React.DOM.p(null,React.DOM.label(null,"Body"),React.DOM.br(null),React.DOM.textarea({ref:"text"})),React.DOM.input({type:"submit",value:"Save"}))))}}),BlogHeadline=React.createClass({displayName:"BlogHeadline",render:function(){var t=this.props.blogHeadline;return React.DOM.article(null,React.DOM.h1(null,React.DOM.a({href:t.url},t.headline)))}}),BlogPosting=React.createClass({displayName:"BlogPosting",getInitialState:function(){var t=this;return{editing:!1,blogPosting:t.getBlogPosting()}},handleSubmit:function(t){var e=this;this.setState({editing:!1,blogPosting:{headline:e.refs.headline.getDOMNode().value,rawBody:e.refs.text.getDOMNode().value,body:e.convert(e.refs.text.getDOMNode().value)}});var a=$("#data").find(".edit_post");a.find("#post_title").val(this.refs.headline.getDOMNode().value),a.find("#post_body").val(this.refs.text.getDOMNode().value),a.submit(),t.preventDefault()},handleEditClick:function(t){this.state.editing=!this.state.editing,this.setState(this.state),t.preventDefault()},handleDeleteClick:function(t){var e=$("#data").find(".delete_post");e.submit(),t.preventDefault()},handleBackClick:function(){$("#data").find("a.back").click()},render:function(){var t=this.state.blogPosting;return React.DOM.div({className:React.addons.classSet({editing:this.state.editing})},React.DOM.div({className:"blog-posting"},React.DOM.h1(null,t.headline),React.DOM.p(null,React.DOM.a({href:"#",onClick:this.handleEditClick},"Edit")," | ",React.DOM.a({href:"#",onClick:this.handleDeleteClick},"Delete")),React.DOM.div({dangerouslySetInnerHTML:{__html:t.body}}),React.DOM.p(null,React.DOM.a({href:"#back",onClick:this.handleBackClick},"Back to postings list"))),React.DOM.div({className:"blog-posting-edit"},React.DOM.form({onSubmit:this.handleSubmit},React.DOM.p(null,React.DOM.label(null,"Title"),React.DOM.br(null),React.DOM.input({type:"text",ref:"headline",value:t.headline})),React.DOM.p(null,React.DOM.label(null,"Body"),React.DOM.br(null),React.DOM.textarea({ref:"text",defaultValue:t.rawBody})),React.DOM.input({type:"submit",value:"Save"}))))},getBlogPosting:function(){var t=this.props.data.items[0].properties;return{headline:t.headline[0],rawBody:t.text[0],body:this.convert(t.text[0])}},convert:function(t){var e=new Showdown.converter;return e.makeHtml(t)}});$(document).ready(function(){var t=$("#data"),e="app";$("body").prepend('<div id="app"></div>'),$("#data").wrap('<div class="grid-40 data-container"></div>'),$("#app").wrap('<div class="grid-60"></div>'),$("#data").before('<h1 class="title title-data">HTML Representation</h1>'),$("#data").before('<p class="info data-info">This would not be here normally, but I am just displaying it so you can see the behind-the-scenes. This is the raw representation of the resource. Click the <a href="#" class="toggle-html">toggle button</a> at the top to hide to get full effect.</p>'),$("#app").before('<h1 class="title title-app">HTML UI</h1>'),$("#app").before('<p class="info app-info">This section is the UI area. This is what the user would see if they have a Javascript-enabled browser. </p>'),$("body").prepend('<div class="nav"><a href="#" class="toggle-html">Toggle HTML Representation</a></div>'),$(".toggle-html").click(function(t){$(".data-container").toggle(),t.preventDefault()}),React.renderComponent(App({dataContainer:t}),document.getElementById(e))});